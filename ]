#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include "database.h"

int main(int argc, char* argv[]) {
	
	//TODO: flag handlers.
	
	//TODO: read scores.db. Store results in score
	
	//TODO: prompt user to enter int score.

	FILE *fp;

	if (access("scores.db", F_OK) == -1)
		fp = fopen("scores.db", "wb+");
	else
		fp = fopen("scores.db", "rb+");
	fclose(fp);
	
	database gameDB;
	dbInit(&gameDB, 1);

	game newGame;
	memset(newGame.title, '\0', sizeof(newGame.title)); 
	//strcpy(newGame.title, "lol");
		
	dbAdd(&gameDB, &newGame);

	//game newGame2;
	//strcpy(newGame2.title, "HOLYSHITPLEASEAPPEAR");
	
	//dbAdd(&gameDB, &newGame2);

	fp = fopen("scores.db", "wb+");

	fwrite(&gameDB.array, sizeof(game), gameDB.size, fp);
	fclose(fp);
	return 1;
}
